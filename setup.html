<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Upload — Save to GitHub</title>
  <style>
    body{font-family:system-ui,Arial;margin:20px;max-width:900px}
    textarea{width:100%;height:120px}
  </style>
</head>
<body>
  <h1>Upload files — Save to GitHub</h1>
  <p>Select files and click Upload. Files will be stored into the repository configured on the server.</p>

  <label>Files (multiple):
    <input id="files" type="file" multiple>
  </label>
  <p>
    <!-- Server URL is hardcoded below so users don't need to paste it -->
    <small>Uploads go to the configured server automatically.</small>
  </p>
  <p><button id="upload">Upload & create share</button></p>

  <h3>Result</h3>
  <div id="result">No upload yet</div>

  <script>
    // PUT your Render service URL here (example):
    const serverUrl = "https://your-service.onrender.com";

    document.getElementById('upload').addEventListener('click', async () => {
      const files = document.getElementById('files').files;
      if (!files.length) return alert('Choose one or more files.');

      const fd = new FormData();
      for (const f of files) fd.append('files', f, f.name);

      const resDiv = document.getElementById('result');
      resDiv.textContent = 'Uploading…';

      try {
        const resp = await fetch(serverUrl.replace(/\/$/, '') + '/upload', { method: 'POST', body: fd });
        const data = await resp.json();
        if (!resp.ok) throw new Error(data.error || JSON.stringify(data));
        resDiv.innerHTML = '<p>Share URL (copy and give to recipients):</p>' +
          `<p><a href="${data.pagesURL}" target="_blank">${data.pagesURL}</a></p>` +
          `<pre>${JSON.stringify(data.share, null, 2)}</pre>`;
      } catch (err) {
        console.error(err);
        resDiv.textContent = 'Upload failed: ' + err.message;
      }
    });
  </script>
</body>
</html>
